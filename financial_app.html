<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application FinanciÃ¨re SAS - Analyses Visuelles</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="main-header">
            <h1>ğŸ’¼ Application de Gestion FinanciÃ¨re SAS</h1>
            <div class="year-controls">
                <select id="yearSelect"></select>
                <button id="addYearBtn" class="btn btn-primary">+ AnnÃ©e</button>
                <button id="deleteYearBtn" class="btn btn-danger">ğŸ—‘ï¸</button>
                <button id="duplicateYearBtn" class="btn btn-warning">ğŸ“‹</button>
            </div>
        </header>

        <main class="main-content">
            <!-- Section du tableau financier -->
            <section class="financial-table-section">
                <div class="table-container">
                    <table class="financial-table">
                        <thead>
                            <tr>
                                <th>Mois</th>
                                <th>Chiffre d'affaires (â‚¬)</th>
                                <th>Pertes (â‚¬)</th>
                                <th>Achats professionnels (â‚¬)</th>
                                <th>BÃ©nÃ©fice brut (â‚¬)</th>
                                <th>Charges sociales (â‚¬)</th>
                                <th>BÃ©nÃ©fice net (â‚¬)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Les lignes du tableau seront gÃ©nÃ©rÃ©es par JavaScript -->
                        </tbody>
                        <tfoot>
                            <tr class="totals-row">
                                <td><strong>TOTAL</strong></td>
                                <td id="totalRevenue"><strong>0 â‚¬</strong></td>
                                <td id="totalLosses"><strong>0 â‚¬</strong></td>
                                <td id="totalPurchases"><strong>0 â‚¬</strong></td>
                                <td id="totalGrossProfit"><strong>0 â‚¬</strong></td>
                                <td id="totalTaxes"><strong>0 â‚¬</strong></td>
                                <td id="totalNetProfit"><strong>0 â‚¬</strong></td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </section>

            <!-- Section des graphiques d'analyse -->
            <section class="charts-section">
                <h2>ğŸ“Š Analyses Visuelles</h2>
                
                <div class="charts-grid">
                    <!-- Graphique principal du chiffre d'affaires -->
                    <div class="chart-item">
                        <h3>ğŸ“ˆ Ã‰volution du Chiffre d'Affaires</h3>
                        <canvas id="revenueChart"></canvas>
                    </div>

                    <!-- Graphique des bÃ©nÃ©fices -->
                    <div class="chart-item">
                        <h3>ğŸ’° Comparaison BÃ©nÃ©fices</h3>
                        <canvas id="profitChart"></canvas>
                    </div>

                    <!-- Nouveau graphique de rÃ©partition -->
                    <div class="chart-item">
                        <h3>ğŸ¥§ RÃ©partition des Revenus/Charges</h3>
                        <canvas id="distributionChart"></canvas>
                    </div>

                    <!-- Nouveau graphique d'Ã©volution mensuelle -->
                    <div class="chart-item">
                        <h3>ğŸ“Š Ã‰volution Mensuelle</h3>
                        <canvas id="monthlyEvolutionChart"></canvas>
                    </div>

                    <!-- Graphique de tendance (optionnel) -->
                    <div class="chart-item">
                        <h3>ğŸ“ˆ Tendances et PrÃ©visions</h3>
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Section des alertes -->
            <section class="alerts-section">
                <div id="alertsContainer">
                    <!-- Les alertes seront gÃ©nÃ©rÃ©es par JavaScript -->
                </div>
            </section>

            <!-- Section des boutons d'action -->
            <section class="actions-section">
                <div class="action-buttons">
                    <button id="statsBtn" class="btn btn-info">ğŸ“Š Statistiques</button>
                    <button id="compareBtn" class="btn btn-warning">ğŸ“ˆ Comparaison</button>
                    <button id="forecastBtn" class="btn btn-success">ğŸ”® PrÃ©visions</button>
                    <button id="budgetBtn" class="btn btn-primary">ğŸ’° Budget</button>
                    <button id="exportBtn" class="btn btn-secondary">ğŸ“„ Export Excel</button>
                    <button id="importBtn" class="btn btn-info">ğŸ“¥ Import</button>
                    <button id="backupBtn" class="btn btn-warning">ğŸ’¾ Backup</button>
                    <button id="printBtn" class="btn btn-dark">ğŸ–¨ï¸ Imprimer</button>
                    <button id="settingsBtn" class="btn btn-secondary">âš™ï¸ ParamÃ¨tres</button>
                </div>
            </section>
        </main>

        <!-- Panel des paramÃ¨tres -->
        <div id="settingsPanel" class="settings-panel hidden">
            <div class="settings-content">
                <h3>âš™ï¸ ParamÃ¨tres</h3>
                <div class="settings-form">
                    <div class="form-group">
                        <label for="taxRate">Taux de charges sociales (%):</label>
                        <input type="number" id="taxRate" min="0" max="100" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="themeColor">Couleur du thÃ¨me:</label>
                        <input type="color" id="themeColor">
                    </div>
                    <div class="form-group">
                        <label for="alertThreshold">Seuil d'alerte (â‚¬):</label>
                        <input type="number" id="alertThreshold" min="0" step="100">
                    </div>
                    <div class="form-group">
                        <label for="autoBackup">Sauvegarde automatique:</label>
                        <input type="checkbox" id="autoBackup">
                    </div>
                </div>
                <div class="settings-buttons">
                    <button id="saveSettings" class="btn btn-success">ğŸ’¾ Sauvegarder</button>
                    <button id="closeSettings" class="btn btn-secondary">âŒ Fermer</button>
                </div>
            </div>
        </div>

        <!-- Input file cachÃ© pour l'import -->
        <input type="file" id="importFile" accept=".json,.xlsx,.csv" style="display: none;">
    </div>

    <!-- Scripts -->
    <script src="stats_module.js"></script>
    <script src="comparison_module.js"></script>
    <script src="forecast_module.js"></script>
    <script src="budget_module.js"></script>
    <script src="script_new_fixed.js"></script>
</body>
</html>